# (MODX)EvolutionCMS.snippets.ddRunSnippets changelog


## Версия 4.2.1 (2024-08-02)

* \* Параметры → `snippets->{$snippetName}->runParams->cache->suffix`: Переименован из `name` (с обратной совместимостью).
* \- `\ddRunSnippets\Cache`: Класс удалён, вместо него используется `\DDTools\Tools\Cache`.
* \* Внимание! Требуется (MODX)EvolutionCMS.libraries.ddTools >= 0.63.


## Версия 4.2 (2024-07-30)

* \+ Параметры → `snippets->{$snippetName}->runParams->cache`:
	* \+ `prefix`: Новый необязательный параметр. Позволяет задать произвольный префикс файла кэша. Удобно, если вы хотите кэшировать какие-то произвольные данные, не связанные ни с какими документами.
	* \* `resourceId`: Переименован из `docId` (с обратной совместимостью).
* \* `\ddRunSnippets\Cache::clearCache` → Параметры:
	* \* Исправлена ошибка, при которой ранее параметры не использовались, а весь кэш очищался независимо от того, что было передано.
	* \* Исправлено неправильное объявление необязательных параметров.
* \* Внимание! Требуется (MODX)EvolutionCMS.libraries.ddTools >= 0.62.


## Версия 4.1.1 (2024-04-14)

* \* Параметры → `outputterParams->tpl`: Плейсхолдеры сниппетов будут заменены даже если сниппет вернул пустой результат.
* \* `\ddTools::getTpl` используется вместо `$modx->getTpl` (стало чуть меньше багов).
* \* Внимание! Требуется (MODX)EvolutionCMS.libraries.ddTools >= 0.60.


## Версия 4.1 (2023-05-04)

* \+ Параметры → `snippets->{$snippetName}->runParams->cache`:
	* \+ Новая группа параметров. Позволяет кэшировать результат конкретного сниппета в определенный файл (см. README).
	* \+ Созданные файлы кэша автоматически удаляются при помощи [(MODX)EvolutionCMS.plugins.ddRunSnippets](https://github.com/DivanDesign/EvolutionCMS.plugins.ddRunSnippets).
* \+ Параметры → `snippets->{$snippetName}->runParams->parseResultCompletely`: Новый параметр. Окончательно распарсить результат конкретного сниппета парсером CMS.
* \* Параметры → `snippets_parseEachResultCompletely`: Переименован из `snippets_parseResults` (с обратной совместимостью).
* \* Внимание! Требуется PHP >= 7.4.


## Версия 4.0 (2023-03-30)

* \* Внимание! Обратная совместимость нарушена.
* \* Внимание! Требуется (MODX)EvolutionCMS.libraries.ddTools >= 0.59.
* \* `\DDTools\Snippet::runSnippet` используется вместо `$modx->runSnippet` для запуска сниппетов без DB и eval. Это повышает производительность и экономит ресурсы сервера, но, к сожалению, вы не можете запускать сниппеты, которые не используют `\DDTools\Snippet`. Пожалуйста, дайте нам обратную связь через [Telegram-чат](https://t.me/dd_code), если это критично.
* \+ Любой запускаемый сниппет может возвращать как строку, так и нативный PHP-массив. Удобно использовать с “вложенными” плейсхолдерами (see README → Примеры).
* \* Параметры → `outputterParams`:
	* \* Следующие параметры были переименованы (с обратной совместимостью):
		* \* `tpl` → `outputterParams->tpl`.
		* \* `tpl_placeholders` → `outputterParams->placeholders`.
	* \* `outputterParams->tpl`:
		* \+ Плейсхолдеры → `[+ddRunSnippetsResult.all+]`: Новый плейсхолдер. Содержит результаты всех выполненных сниппетов, склеенные через `''`.
		* \* Значение по умолчанию: Изменено на `''` (все сниппеты выполнятся, но ничего не выведется).
	* \- `outputterParams->placeholders`: Устаревшее название параметра `placeholders` больше не поддерживается.
* \* README:
	* \+ Описание параметров: Добавлены дополнительные подзаголовки.
	* \* Примеры:
		* \+ Добавлены дополнительные комментарии.
		* \* Для всех примеров используется HJSON.
	* \+ Ссылки → GitHub.


## Версия 3.4 (2021-04-30)

* \+ Преобразование в JSON и обратно больше не используется для вложенных объектов, вместо этого используется рекурсия. Таким образом, вам не нужно заботиться о правильном формате JSON в результате каждого сниппета, когда плейсхолдеры используются в значениях-объектах параметров любой глубины.


## Версия 3.3 (2021-04-29)

* \* Внимание! Требуется PHP >= 5.6.
* \* Внимание! Требуется (MODX)EvolutionCMS.libraries.ddTools >= 0.49.1.
* \+ Параметры:
	* \+ `snippets_parseResults`: Новый параметр. Добавляет возможность парсить результат каждого сниппета парсером CMS.
	* \+ `snippets`, `tpl_placeholders`: Также может быть задан, как [HJSON](https://hjson.github.io/) или как нативный PHP объект или массив (например, для вызовов через `$modx->runSnippet`).
* \+ Запустить сниппет без DB и eval можно через `\DDTools\Snippet::runSnippet` (см. примеры в README).
* \+ `\ddRunSnippets\Snippet`: Новый класс. Весь код сниппета перенесён туда.
* \+ README:
	* \+ Документация → Установка → Используя (MODX)EvolutionCMS.libraries.ddInstaller.
	* \+ Ссылки.
* \+ Composer.json → `support`.


## Версия 3.2 (2020-06-03)

* \* Внимание! Требуется (MODX)EvolutionCMS.libraries.ddTools >= 0.38.1
* \+ Параметры → `snippets->{$snippetName}->{$paramName}`: Плейсхолдеры предыдущих вызовов сниппетов также работают в параметрах-объектах на любой глубине.
* \* Рефакторинг.
* \+ README → Документация → Примеры → Передача объектов и массивов в качестве параметров сниппета.


## Версия 3.1.1 (2020-05-21)

* \* Параметры → `tpl_placeholders`:
	* \* Переименован из `placeholders` (с обратной совместимостью).
	* \* Действительно поддерживает JSON и QueryString.


## Версия 3.1 (2020-05-14)

* \+ Параметры → `snippets->{$snippetName}->{$paramName}`: В отличие от стандартного вызова CMS вы можете передавать не только строковые параметры, поддерживаютя любые типы.


## Версия 3.0 (2020-05-13)

* \* Внимание! Обратная совместимость нарушена.
* \* Внимание! Требуется (MODX)EvolutionCMS.libraries.ddTools >= 0.35.1 (не тестировался с более старыми версиями).
* \* Сниппет полностью переработан, см. README.
* \+ README → Документация → Примеры.


## Версия 2.5.1b (2016-12-28)

* \* Внимание! Требуется (MODX)EvolutionCMS.libraries.ddTools >= 0.16.1.
* \* Совместимость с новой версией (MODX)EvolutionCMS.libraries.ddTools.
* \* Незначительные изменения.


## Версия 2.5b (2013-04-19)

* \+ Добавлена возможность задавать «псевдонимы» результатам выполнения сниппетов (см. параметр `snipName`).
* \* Небольшие исправления и изменения кода.


## Версия 2.4 (2012-10-24)

* \+ Добавлена возможность изменить префикс плэйсхолдеров результатов сниппетов (параметр `resultPrefix`). По умолчанию, как и раньше, остался `'ddresult'`.


## Версия 2.3 (2012-08-20)

* \* Добавлена обработка пустых результатов при выводе через шаблон (пустые результаты удаляются).


## Версия 2.2 (2012-04-09)

* \* Внимание! Требуется (MODX)EvolutionCMS.libraries.ddTools >= 0.2.
* \+ Добавлена возможность выводить несколько результатов выполнения сниппетов в произвольном порядке через разделитель при выводе без шаблона (параметры `num` и `glue`).


## Версия 2.1 (2012-03-18)

* \+ Добавлена возможность выводить окончательный результат выполнения в плэйсхолдер (параметры `toPlaceholder` и `placeholderName`).


## Версия 2.0 (2012-03-10)

* \+ Сниппет переработан на запуск нескольких сниппетов.
* \* Множественные изменения кода.
* \* Параметры `name`, `parameters` и `values` переименованы в `snipName`, `snipParams` и `snipValues` соответственно.


## Версия 1.0 (2011-12-12)

* \+ Первый релиз.


<link rel="stylesheet" type="text/css" href="https://raw.githack.com/DivanDesign/CSS.ddMarkdown/master/style.min.css" />
<style>ul{list-style:none;}</style>